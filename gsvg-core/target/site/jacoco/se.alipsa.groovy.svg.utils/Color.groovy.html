<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Color.groovy</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">gsvg</a> &gt; <a href="index.source.html" class="el_package">se.alipsa.groovy.svg.utils</a> &gt; <span class="el_source">Color.groovy</span></div><h1>Color.groovy</h1><pre class="source lang-java linenums">package se.alipsa.groovy.svg.utils

import groovy.transform.CompileStatic

/**
 * Utility class for creating and manipulating SVG colors.
 * Supports RGB, RGBA, HSL, HSLA, Hex, and named colors.
 *
 * &lt;h3&gt;Example Usage:&lt;/h3&gt;
 * &lt;pre&gt;
 * // Create colors
 * def red = Color.rgb(255, 0, 0)
 * def blue = Color.hex('#0000ff')
 * def green = Color.hsl(120, 100, 50)
 *
 * // Use with SVG elements
 * rect.fill(Color.rgb(255, 0, 0))
 * circle.stroke(Color.hex('#00ff00').withAlpha(0.5))
 *
 * // Color manipulation
 * def darker = red.darken(0.2)
 * def lighter = blue.lighten(0.3)
 * &lt;/pre&gt;
 */
@CompileStatic
class Color {

  private int red     // 0-255
  private int green   // 0-255
  private int blue    // 0-255
  private double alpha = 1.0  // 0.0-1.0

  /**
   * Common named SVG colors.
   */
<span class="fc" id="L36">  static final Map&lt;String, String&gt; NAMED_COLORS = [</span>
    'aliceblue': '#f0f8ff', 'antiquewhite': '#faebd7', 'aqua': '#00ffff',
    'aquamarine': '#7fffd4', 'azure': '#f0ffff', 'beige': '#f5f5dc',
    'bisque': '#ffe4c4', 'black': '#000000', 'blanchedalmond': '#ffebcd',
    'blue': '#0000ff', 'blueviolet': '#8a2be2', 'brown': '#a52a2a',
    'burlywood': '#deb887', 'cadetblue': '#5f9ea0', 'chartreuse': '#7fff00',
    'chocolate': '#d2691e', 'coral': '#ff7f50', 'cornflowerblue': '#6495ed',
    'cornsilk': '#fff8dc', 'crimson': '#dc143c', 'cyan': '#00ffff',
    'darkblue': '#00008b', 'darkcyan': '#008b8b', 'darkgoldenrod': '#b8860b',
    'darkgray': '#a9a9a9', 'darkgreen': '#006400', 'darkgrey': '#a9a9a9',
    'darkkhaki': '#bdb76b', 'darkmagenta': '#8b008b', 'darkolivegreen': '#556b2f',
    'darkorange': '#ff8c00', 'darkorchid': '#9932cc', 'darkred': '#8b0000',
    'darksalmon': '#e9967a', 'darkseagreen': '#8fbc8f', 'darkslateblue': '#483d8b',
    'darkslategray': '#2f4f4f', 'darkslategrey': '#2f4f4f', 'darkturquoise': '#00ced1',
    'darkviolet': '#9400d3', 'deeppink': '#ff1493', 'deepskyblue': '#00bfff',
    'dimgray': '#696969', 'dimgrey': '#696969', 'dodgerblue': '#1e90ff',
    'firebrick': '#b22222', 'floralwhite': '#fffaf0', 'forestgreen': '#228b22',
    'fuchsia': '#ff00ff', 'gainsboro': '#dcdcdc', 'ghostwhite': '#f8f8ff',
    'gold': '#ffd700', 'goldenrod': '#daa520', 'gray': '#808080',
    'green': '#008000', 'greenyellow': '#adff2f', 'grey': '#808080',
    'honeydew': '#f0fff0', 'hotpink': '#ff69b4', 'indianred': '#cd5c5c',
    'indigo': '#4b0082', 'ivory': '#fffff0', 'khaki': '#f0e68c',
    'lavender': '#e6e6fa', 'lavenderblush': '#fff0f5', 'lawngreen': '#7cfc00',
    'lemonchiffon': '#fffacd', 'lightblue': '#add8e6', 'lightcoral': '#f08080',
    'lightcyan': '#e0ffff', 'lightgoldenrodyellow': '#fafad2', 'lightgray': '#d3d3d3',
    'lightgreen': '#90ee90', 'lightgrey': '#d3d3d3', 'lightpink': '#ffb6c1',
    'lightsalmon': '#ffa07a', 'lightseagreen': '#20b2aa', 'lightskyblue': '#87cefa',
    'lightslategray': '#778899', 'lightslategrey': '#778899', 'lightsteelblue': '#b0c4de',
    'lightyellow': '#ffffe0', 'lime': '#00ff00', 'limegreen': '#32cd32',
    'linen': '#faf0e6', 'magenta': '#ff00ff', 'maroon': '#800000',
    'mediumaquamarine': '#66cdaa', 'mediumblue': '#0000cd', 'mediumorchid': '#ba55d3',
    'mediumpurple': '#9370db', 'mediumseagreen': '#3cb371', 'mediumslateblue': '#7b68ee',
    'mediumspringgreen': '#00fa9a', 'mediumturquoise': '#48d1cc', 'mediumvioletred': '#c71585',
    'midnightblue': '#191970', 'mintcream': '#f5fffa', 'mistyrose': '#ffe4e1',
    'moccasin': '#ffe4b5', 'navajowhite': '#ffdead', 'navy': '#000080',
    'oldlace': '#fdf5e6', 'olive': '#808000', 'olivedrab': '#6b8e23',
    'orange': '#ffa500', 'orangered': '#ff4500', 'orchid': '#da70d6',
    'palegoldenrod': '#eee8aa', 'palegreen': '#98fb98', 'paleturquoise': '#afeeee',
    'palevioletred': '#db7093', 'papayawhip': '#ffefd5', 'peachpuff': '#ffdab9',
    'peru': '#cd853f', 'pink': '#ffc0cb', 'plum': '#dda0dd',
    'powderblue': '#b0e0e6', 'purple': '#800080', 'red': '#ff0000',
    'rosybrown': '#bc8f8f', 'royalblue': '#4169e1', 'saddlebrown': '#8b4513',
    'salmon': '#fa8072', 'sandybrown': '#f4a460', 'seagreen': '#2e8b57',
    'seashell': '#fff5ee', 'sienna': '#a0522d', 'silver': '#c0c0c0',
    'skyblue': '#87ceeb', 'slateblue': '#6a5acd', 'slategray': '#708090',
    'slategrey': '#708090', 'snow': '#fffafa', 'springgreen': '#00ff7f',
    'steelblue': '#4682b4', 'tan': '#d2b48c', 'teal': '#008080',
    'thistle': '#d8bfd8', 'tomato': '#ff6347', 'turquoise': '#40e0d0',
    'violet': '#ee82ee', 'wheat': '#f5deb3', 'white': '#ffffff',
    'whitesmoke': '#f5f5f5', 'yellow': '#ffff00', 'yellowgreen': '#9acd32'
  ].asImmutable()

<span class="fc" id="L88">  private Color(int r, int g, int b, double a = 1.0) {</span>
<span class="fc" id="L89">    this.red = clampInt(r, 0, 255)</span>
<span class="fc" id="L90">    this.green = clampInt(g, 0, 255)</span>
<span class="fc" id="L91">    this.blue = clampInt(b, 0, 255)</span>
<span class="fc" id="L92">    this.alpha = clampDouble(a, 0.0, 1.0)</span>
<span class="fc" id="L93">  }</span>

  /**
   * Creates a color from RGB values (0-255).
   *
   * @param r red component (0-255)
   * @param g green component (0-255)
   * @param b blue component (0-255)
   * @return a new Color instance
   */
  static Color rgb(int r, int g, int b) {
<span class="fc" id="L104">    new Color(r, g, b)</span>
  }

  /**
   * Creates a color from RGBA values.
   *
   * @param r red component (0-255)
   * @param g green component (0-255)
   * @param b blue component (0-255)
   * @param a alpha component (0.0-1.0)
   * @return a new Color instance
   */
  static Color rgba(int r, int g, int b, double a) {
<span class="fc" id="L117">    new Color(r, g, b, a)</span>
  }

  /**
   * Creates a color from a hex string.
   * Supports formats: #RGB, #RRGGBB, #RRGGBBAA
   *
   * @param hex the hex color string
   * @return a new Color instance
   */
  static Color hex(String hex) {
<span class="pc bpc" id="L128" title="4 of 8 branches missed.">    if (hex == null || hex.isEmpty()) {</span>
<span class="nc" id="L129">      throw new IllegalArgumentException('Hex color cannot be null or empty')</span>
    }

<span class="fc" id="L132">    String h = hex.trim()</span>
<span class="fc bfc" id="L133" title="All 2 branches covered.">    if (h.startsWith('#')) {</span>
<span class="fc" id="L134">      h = h.substring(1)</span>
    }

<span class="fc" id="L137">    int r, g, b</span>
<span class="fc" id="L138">    double a = 1.0</span>

<span class="fc" id="L140">    switch (h.length()) {</span>
<span class="fc bfc" id="L141" title="All 2 branches covered.">      case 3:  // #RGB</span>
<span class="fc" id="L142">        r = Integer.parseInt(h.substring(0, 1) * 2, 16)</span>
<span class="fc" id="L143">        g = Integer.parseInt(h.substring(1, 2) * 2, 16)</span>
<span class="fc" id="L144">        b = Integer.parseInt(h.substring(2, 3) * 2, 16)</span>
<span class="pc" id="L145">        break</span>
<span class="fc bfc" id="L146" title="All 2 branches covered.">      case 6:  // #RRGGBB</span>
<span class="fc" id="L147">        r = Integer.parseInt(h.substring(0, 2), 16)</span>
<span class="fc" id="L148">        g = Integer.parseInt(h.substring(2, 4), 16)</span>
<span class="fc" id="L149">        b = Integer.parseInt(h.substring(4, 6), 16)</span>
<span class="pc" id="L150">        break</span>
<span class="pc bpc" id="L151" title="1 of 2 branches missed.">      case 8:  // #RRGGBBAA</span>
<span class="fc" id="L152">        r = Integer.parseInt(h.substring(0, 2), 16)</span>
<span class="fc" id="L153">        g = Integer.parseInt(h.substring(2, 4), 16)</span>
<span class="fc" id="L154">        b = Integer.parseInt(h.substring(4, 6), 16)</span>
<span class="fc" id="L155">        a = Integer.parseInt(h.substring(6, 8), 16) / 255.0</span>
<span class="fc" id="L156">        break</span>
      default:
<span class="nc" id="L158">        throw new IllegalArgumentException(&quot;Invalid hex color format: $hex&quot;)</span>
    }

<span class="fc" id="L161">    new Color(r, g, b, a)</span>
  }

  /**
   * Creates a color from HSL values.
   *
   * @param h hue (0-360 degrees)
   * @param s saturation (0-100 percent)
   * @param l lightness (0-100 percent)
   * @return a new Color instance
   */
  static Color hsl(double h, double s, double l) {
<span class="fc" id="L173">    hsla(h, s, l, 1.0)</span>
  }

  /**
   * Creates a color from HSLA values.
   *
   * @param h hue (0-360 degrees)
   * @param s saturation (0-100 percent)
   * @param l lightness (0-100 percent)
   * @param a alpha (0.0-1.0)
   * @return a new Color instance
   */
  static Color hsla(double h, double s, double l, double a) {
    // Normalize values
<span class="fc" id="L187">    h = ((h % 360) + 360) % 360  // Wrap to 0-360</span>
<span class="fc" id="L188">    s = clampDouble(s, 0.0, 100.0) / 100.0</span>
<span class="fc" id="L189">    l = clampDouble(l, 0.0, 100.0) / 100.0</span>

<span class="fc" id="L191">    double c = (1 - Math.abs(2 * l - 1)) * s</span>
<span class="fc" id="L192">    double x = c * (1 - Math.abs((h / 60) % 2 - 1))</span>
<span class="fc" id="L193">    double m = l - c / 2</span>

<span class="fc" id="L195">    double r1, g1, b1</span>
<span class="fc bfc" id="L196" title="All 4 branches covered.">    if (h &lt; 60) {</span>
<span class="fc" id="L197">      r1 = c; g1 = x; b1 = 0</span>
<span class="pc bpc" id="L198" title="2 of 4 branches missed.">    } else if (h &lt; 120) {</span>
<span class="nc" id="L199">      r1 = x; g1 = c; b1 = 0</span>
<span class="fc bfc" id="L200" title="All 4 branches covered.">    } else if (h &lt; 180) {</span>
<span class="fc" id="L201">      r1 = 0; g1 = c; b1 = x</span>
<span class="pc bpc" id="L202" title="2 of 4 branches missed.">    } else if (h &lt; 240) {</span>
<span class="nc" id="L203">      r1 = 0; g1 = x; b1 = c</span>
<span class="pc bpc" id="L204" title="2 of 4 branches missed.">    } else if (h &lt; 300) {</span>
<span class="fc" id="L205">      r1 = x; g1 = 0; b1 = c</span>
    } else {
<span class="nc" id="L207">      r1 = c; g1 = 0; b1 = x</span>
    }

<span class="fc" id="L210">    int r = (int) Math.round((r1 + m) * 255)</span>
<span class="fc" id="L211">    int g = (int) Math.round((g1 + m) * 255)</span>
<span class="fc" id="L212">    int b = (int) Math.round((b1 + m) * 255)</span>

<span class="fc" id="L214">    new Color(r, g, b, a)</span>
  }

  /**
   * Creates a color from a named color.
   *
   * @param name the color name (e.g., 'red', 'blue')
   * @return a new Color instance
   */
  static Color named(String name) {
<span class="fc" id="L224">    String hexValue = NAMED_COLORS[name.toLowerCase()]</span>
<span class="fc bfc" id="L225" title="All 4 branches covered.">    if (hexValue == null) {</span>
<span class="fc" id="L226">      throw new IllegalArgumentException(&quot;Unknown color name: $name&quot;)</span>
    }
<span class="fc" id="L228">    hex(hexValue)</span>
  }

  /**
   * Parses a color string in any supported format.
   * Supports: hex (#rgb, #rrggbb), rgb(), rgba(), hsl(), hsla(), named colors
   *
   * @param color the color string
   * @return a new Color instance
   */
  static Color parse(String color) {
<span class="pc bpc" id="L239" title="4 of 8 branches missed.">    if (color == null || color.isEmpty()) {</span>
<span class="nc" id="L240">      throw new IllegalArgumentException('Color string cannot be null or empty')</span>
    }

<span class="fc" id="L243">    String c = color.trim().toLowerCase()</span>

    // Hex color
<span class="fc bfc" id="L246" title="All 2 branches covered.">    if (c.startsWith('#')) {</span>
<span class="fc" id="L247">      return hex(c)</span>
    }

    // rgb() or rgba()
<span class="fc bfc" id="L251" title="All 2 branches covered.">    if (c.startsWith('rgb')) {</span>
<span class="fc" id="L252">      def matcher = c =~ /rgba?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*([\d.]+)\s*)?\)/</span>
<span class="pc bpc" id="L253" title="1 of 2 branches missed.">      if (matcher.matches()) {</span>
<span class="fc" id="L254">        int r = matcher.group(1) as int</span>
<span class="fc" id="L255">        int g = matcher.group(2) as int</span>
<span class="fc" id="L256">        int b = matcher.group(3) as int</span>
<span class="fc" id="L257">        String alphaStr = matcher.group(4)</span>
<span class="fc" id="L258">        double a = 1.0</span>
<span class="fc bfc" id="L259" title="All 4 branches covered.">        if (alphaStr) {</span>
<span class="fc" id="L260">          a = alphaStr as double</span>
        }
<span class="fc" id="L262">        return new Color(r, g, b, a)</span>
      }
    }

    // hsl() or hsla()
<span class="fc bfc" id="L267" title="All 2 branches covered.">    if (c.startsWith('hsl')) {</span>
<span class="fc" id="L268">      def matcher = c =~ /hsla?\s*\(\s*([\d.]+)\s*,\s*([\d.]+)%?\s*,\s*([\d.]+)%?\s*(?:,\s*([\d.]+)\s*)?\)/</span>
<span class="pc bpc" id="L269" title="1 of 2 branches missed.">      if (matcher.matches()) {</span>
<span class="fc" id="L270">        double h = matcher.group(1) as double</span>
<span class="fc" id="L271">        double s = matcher.group(2) as double</span>
<span class="fc" id="L272">        double l = matcher.group(3) as double</span>
<span class="fc" id="L273">        String alphaStr = matcher.group(4)</span>
<span class="fc" id="L274">        double a = 1.0</span>
<span class="fc bfc" id="L275" title="All 4 branches covered.">        if (alphaStr) {</span>
<span class="fc" id="L276">          a = alphaStr as double</span>
        }
<span class="fc" id="L278">        return hsla(h, s, l, a)</span>
      }
    }

    // Named color
<span class="pc bpc" id="L283" title="1 of 2 branches missed.">    if (NAMED_COLORS.containsKey(c)) {</span>
<span class="fc" id="L284">      return named(c)</span>
    }

<span class="nc" id="L287">    throw new IllegalArgumentException(&quot;Unable to parse color: $color&quot;)</span>
  }

  /**
   * Returns a new color with the specified alpha value.
   *
   * @param a the new alpha value (0.0-1.0)
   * @return a new Color instance
   */
  Color withAlpha(double a) {
<span class="fc" id="L297">    new Color(red, green, blue, a)</span>
  }

  /**
   * Darkens the color by the specified amount.
   *
   * @param amount amount to darken (0.0-1.0)
   * @return a new darker Color instance
   */
  Color darken(double amount) {
<span class="fc" id="L307">    amount = clampDouble(amount, 0.0, 1.0)</span>
<span class="fc" id="L308">    double factor = 1.0 - amount</span>
<span class="fc" id="L309">    new Color(</span>
<span class="fc" id="L310">      (int) (red * factor),</span>
<span class="fc" id="L311">      (int) (green * factor),</span>
<span class="fc" id="L312">      (int) (blue * factor),</span>
      alpha
    )
  }

  /**
   * Lightens the color by the specified amount.
   *
   * @param amount amount to lighten (0.0-1.0)
   * @return a new lighter Color instance
   */
  Color lighten(double amount) {
<span class="fc" id="L324">    amount = clampDouble(amount, 0.0, 1.0)</span>
<span class="fc" id="L325">    new Color(</span>
<span class="fc" id="L326">      (int) (red + (255 - red) * amount),</span>
<span class="fc" id="L327">      (int) (green + (255 - green) * amount),</span>
<span class="fc" id="L328">      (int) (blue + (255 - blue) * amount),</span>
      alpha
    )
  }

  /**
   * Interpolates between this color and another.
   *
   * @param other the other color
   * @param t interpolation factor (0.0 = this color, 1.0 = other color)
   * @return a new interpolated Color instance
   */
  Color interpolate(Color other, double t) {
<span class="fc" id="L341">    t = clampDouble(t, 0.0, 1.0)</span>
<span class="fc" id="L342">    new Color(</span>
<span class="fc" id="L343">      (int) (red + (other.red - red) * t),</span>
<span class="fc" id="L344">      (int) (green + (other.green - green) * t),</span>
<span class="fc" id="L345">      (int) (blue + (other.blue - blue) * t),</span>
<span class="fc" id="L346">      alpha + (other.alpha - alpha) * t</span>
    )
  }

  /**
   * Returns the color as a hex string.
   *
   * @param includeAlpha whether to include alpha channel
   * @return hex color string (e.g., &quot;#ff0000&quot; or &quot;#ff0000ff&quot;)
   */
  String toHex(boolean includeAlpha = false) {
<span class="fc" id="L357">    String hex = String.format('#%02x%02x%02x', red, green, blue)</span>
<span class="fc bfc" id="L358" title="All 2 branches covered.">    if (includeAlpha) {</span>
<span class="fc" id="L359">      hex += String.format('%02x', (int) Math.round(alpha * 255))</span>
    }
<span class="fc" id="L361">    hex</span>
  }

  /**
   * Returns the color as an rgb() or rgba() string.
   *
   * @return rgb/rgba string (e.g., &quot;rgb(255, 0, 0)&quot; or &quot;rgba(255, 0, 0, 0.5)&quot;)
   */
  String toRgb() {
<span class="fc bfc" id="L370" title="All 2 branches covered.">    if (alpha &lt; 1.0) {</span>
<span class="pc" id="L371">      &quot;rgba($red, $green, $blue, $alpha)&quot;</span>
    } else {
<span class="fc" id="L373">      &quot;rgb($red, $green, $blue)&quot;</span>
    }
  }

  /**
   * Converts to HSL and returns as hsl() or hsla() string.
   *
   * @return hsl/hsla string
   */
  String toHsl() {
<span class="fc" id="L383">    double r = red / 255.0</span>
<span class="fc" id="L384">    double g = green / 255.0</span>
<span class="fc" id="L385">    double b = blue / 255.0</span>

<span class="fc" id="L387">    double max = Math.max(r, Math.max(g, b))</span>
<span class="fc" id="L388">    double min = Math.min(r, Math.min(g, b))</span>
<span class="fc" id="L389">    double delta = max - min</span>

<span class="fc" id="L391">    double h = 0, s = 0, l = (max + min) / 2</span>

<span class="pc bpc" id="L393" title="2 of 4 branches missed.">    if (delta != 0) {</span>
<span class="pc bpc" id="L394" title="1 of 2 branches missed.">      s = l &gt; 0.5 ? delta / (2 - max - min) : delta / (max + min)</span>

<span class="pc bpc" id="L396" title="2 of 4 branches missed.">      if (max == r) {</span>
<span class="pc bpc" id="L397" title="2 of 4 branches missed.">        h = ((g - b) / delta + (g &lt; b ? 6 : 0)) / 6</span>
<span class="nc bnc" id="L398" title="All 4 branches missed.">      } else if (max == g) {</span>
<span class="nc" id="L399">        h = ((b - r) / delta + 2) / 6</span>
      } else {
<span class="nc" id="L401">        h = ((r - g) / delta + 4) / 6</span>
      }
    }

<span class="fc" id="L405">    int hInt = (int) Math.round(h * 360)</span>
<span class="fc" id="L406">    int sInt = (int) Math.round(s * 100)</span>
<span class="fc" id="L407">    int lInt = (int) Math.round(l * 100)</span>

<span class="fc bfc" id="L409" title="All 2 branches covered.">    if (alpha &lt; 1.0) {</span>
<span class="pc" id="L410">      &quot;hsla($hInt, ${sInt}%, ${lInt}%, $alpha)&quot;</span>
    } else {
<span class="fc" id="L412">      &quot;hsl($hInt, ${sInt}%, ${lInt}%)&quot;</span>
    }
  }

  /**
   * Returns the color as an SVG-compatible string.
   * Uses hex format for opaque colors, rgba() for colors with alpha.
   *
   * @return SVG color string
   */
  @Override
  String toString() {
<span class="fc bfc" id="L424" title="All 2 branches covered.">    if (alpha &lt; 1.0) {</span>
<span class="pc" id="L425">      toRgb()</span>
    } else {
<span class="fc" id="L427">      toHex()</span>
    }
  }

  /**
   * Gets the red component.
   *
   * @return red value (0-255)
   */
<span class="fc" id="L436">  int getRed() { red }</span>

  /**
   * Gets the green component.
   *
   * @return green value (0-255)
   */
<span class="fc" id="L443">  int getGreen() { green }</span>

  /**
   * Gets the blue component.
   *
   * @return blue value (0-255)
   */
<span class="fc" id="L450">  int getBlue() { blue }</span>

  /**
   * Gets the alpha component.
   *
   * @return alpha value (0.0-1.0)
   */
<span class="fc" id="L457">  double getAlpha() { alpha }</span>

  /**
   * Clamps an integer value between min and max.
   */
  private static int clampInt(int value, int min, int max) {
<span class="fc bfc" id="L463" title="All 4 branches covered.">    if (value &lt; min) return min</span>
<span class="fc bfc" id="L464" title="All 4 branches covered.">    if (value &gt; max) return max</span>
<span class="fc" id="L465">    return value</span>
  }

  /**
   * Clamps a double value between min and max.
   */
  private static double clampDouble(double value, double min, double max) {
<span class="fc bfc" id="L472" title="All 4 branches covered.">    if (value &lt; min) return min</span>
<span class="fc bfc" id="L473" title="All 4 branches covered.">    if (value &gt; max) return max</span>
<span class="fc" id="L474">    return value</span>
  }

  @Override
  boolean equals(Object obj) {
<span class="pc bpc" id="L479" title="2 of 4 branches missed.">    if (!(obj instanceof Color)) return false</span>
<span class="fc" id="L480">    Color other = (Color) obj</span>
<span class="fc bfc" id="L481" title="All 4 branches covered.">    return red == other.red &amp;&amp;</span>
<span class="pc bpc" id="L482" title="2 of 6 branches missed.">           green == other.green &amp;&amp;</span>
<span class="pc bpc" id="L483" title="2 of 6 branches missed.">           blue == other.blue &amp;&amp;</span>
<span class="pc bpc" id="L484" title="1 of 2 branches missed.">           Math.abs(alpha - other.alpha) &lt; 0.0001</span>
  }

  @Override
  int hashCode() {
<span class="fc" id="L489">    int result = red</span>
<span class="fc" id="L490">    result = 31 * result + green</span>
<span class="fc" id="L491">    result = 31 * result + blue</span>
<span class="fc" id="L492">    result = 31 * result + (int) (alpha * 1000)</span>
<span class="fc" id="L493">    return result</span>
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.14.202510111229</span></div></body></html>