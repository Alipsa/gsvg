<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>ValidationReport.groovy</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">gsvg</a> &gt; <a href="index.source.html" class="el_package">se.alipsa.groovy.svg.validation</a> &gt; <span class="el_source">ValidationReport.groovy</span></div><h1>ValidationReport.groovy</h1><pre class="source lang-java linenums">package se.alipsa.groovy.svg.validation

import groovy.transform.CompileStatic

/**
 * Aggregates validation issues found during SVG validation.
 * &lt;p&gt;
 * A mutable container that collects {@link ValidationIssue}s and provides convenient
 * methods to query and filter them by severity level.
 * &lt;p&gt;
 * Example usage:
 * &lt;pre&gt;
 * ValidationReport report = new ValidationReport()
 * report.addIssue(ValidationIssue.error(&quot;Missing required attribute&quot;, ...))
 * report.addIssue(ValidationIssue.warning(&quot;Duplicate ID&quot;, ...))
 *
 * if (report.hasErrors()) {
 *     println &quot;Validation failed with ${report.errorCount} errors&quot;
 *     report.errors.each { println it }
 * }
 * &lt;/pre&gt;
 */
@CompileStatic
class ValidationReport {
    private final List&lt;ValidationIssue&gt; issues = []

    /**
     * Adds a validation issue to this report.
     *
     * @param issue the issue to add
     * @return this report for method chaining
     */
    ValidationReport addIssue(ValidationIssue issue) {
<span class="pc bpc" id="L34" title="2 of 4 branches missed.">        if (issue) {</span>
<span class="fc" id="L35">            issues.add(issue)</span>
        }
<span class="fc" id="L37">        this</span>
    }

    /**
     * Returns all validation issues.
     *
     * @return unmodifiable list of all issues
     */
    List&lt;ValidationIssue&gt; getAllIssues() {
<span class="fc" id="L46">        Collections.unmodifiableList(issues)</span>
    }

    /**
     * Returns only ERROR level issues.
     *
     * @return unmodifiable list of errors
     */
    List&lt;ValidationIssue&gt; getErrors() {
<span class="fc" id="L55">        Collections.unmodifiableList(issues.findAll { it.level == ValidationLevel.ERROR })</span>
    }

    /**
     * Returns only WARNING level issues.
     *
     * @return unmodifiable list of warnings
     */
    List&lt;ValidationIssue&gt; getWarnings() {
<span class="fc" id="L64">        Collections.unmodifiableList(issues.findAll { it.level == ValidationLevel.WARNING })</span>
    }

    /**
     * Returns only INFO level issues.
     *
     * @return unmodifiable list of info messages
     */
    List&lt;ValidationIssue&gt; getInfo() {
<span class="fc" id="L73">        Collections.unmodifiableList(issues.findAll { it.level == ValidationLevel.INFO })</span>
    }

    /**
     * Checks if this report contains any ERROR level issues.
     *
     * @return true if there are errors
     */
    boolean hasErrors() {
<span class="fc" id="L82">        issues.any { it.level == ValidationLevel.ERROR }</span>
    }

    /**
     * Checks if this report contains any WARNING level issues.
     *
     * @return true if there are warnings
     */
    boolean hasWarnings() {
<span class="fc" id="L91">        issues.any { it.level == ValidationLevel.WARNING }</span>
    }

    /**
     * Checks if this report contains any issues at all.
     *
     * @return true if there are any issues
     */
    boolean hasIssues() {
<span class="fc bfc" id="L100" title="All 2 branches covered.">        !issues.isEmpty()</span>
    }

    /**
     * Checks if validation passed (no errors).
     * Note: Warnings and info messages don't prevent validation from passing.
     *
     * @return true if there are no errors
     */
    boolean isValid() {
<span class="fc bfc" id="L110" title="All 2 branches covered.">        !hasErrors()</span>
    }

    /**
     * Returns the total number of issues.
     *
     * @return total issue count
     */
    int size() {
<span class="fc" id="L119">        issues.size()</span>
    }

    /**
     * Returns the number of ERROR level issues.
     *
     * @return error count
     */
    int getErrorCount() {
<span class="fc" id="L128">        errors.size()</span>
    }

    /**
     * Returns the number of WARNING level issues.
     *
     * @return warning count
     */
    int getWarningCount() {
<span class="fc" id="L137">        warnings.size()</span>
    }

    /**
     * Returns the number of INFO level issues.
     *
     * @return info count
     */
    int getInfoCount() {
<span class="fc" id="L146">        info.size()</span>
    }

    /**
     * Clears all issues from this report.
     */
    void clear() {
<span class="fc" id="L153">        issues.clear()</span>
<span class="fc" id="L154">    }</span>

    @Override
    String toString() {
<span class="fc bfc" id="L158" title="All 2 branches covered.">        if (issues.isEmpty()) {</span>
<span class="fc" id="L159">            return &quot;Validation Report: No issues found&quot;</span>
        }

<span class="fc" id="L162">        StringBuilder sb = new StringBuilder()</span>
<span class="fc" id="L163">        sb.append(&quot;Validation Report: &quot;)</span>
<span class="fc" id="L164">           .append(issues.size()).append(&quot; issue(s)&quot;)</span>

<span class="fc" id="L166">        int errors = errorCount</span>
<span class="fc" id="L167">        int warnings = warningCount</span>
<span class="fc" id="L168">        int infos = infoCount</span>

<span class="fc" id="L170">        sb.append(&quot; (&quot;)</span>
<span class="pc bpc" id="L171" title="2 of 4 branches missed.">        if (errors &gt; 0) sb.append(errors).append(&quot; error(s)&quot;)</span>
<span class="pc bpc" id="L172" title="2 of 4 branches missed.">        if (warnings &gt; 0) {</span>
<span class="pc bpc" id="L173" title="2 of 4 branches missed.">            if (errors &gt; 0) sb.append(&quot;, &quot;)</span>
<span class="fc" id="L174">            sb.append(warnings).append(&quot; warning(s)&quot;)</span>
        }
<span class="pc bpc" id="L176" title="2 of 4 branches missed.">        if (infos &gt; 0) {</span>
<span class="nc bnc" id="L177" title="All 10 branches missed.">            if (errors &gt; 0 || warnings &gt; 0) sb.append(&quot;, &quot;)</span>
<span class="nc" id="L178">            sb.append(infos).append(&quot; info&quot;)</span>
        }
<span class="fc" id="L180">        sb.append(&quot;)\n&quot;)</span>

<span class="fc" id="L182">        issues.each { issue -&gt;</span>
<span class="fc" id="L183">            sb.append(&quot;  - &quot;).append(issue.toString()).append(&quot;\n&quot;)</span>
        }

<span class="fc" id="L186">        sb.toString()</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.14.202510111229</span></div></body></html>